import{af as a,al as r,ao as o,aR as e,ar as s,as as l,ay as i,av as t,aS as n,aT as c,ax as d,aw as u,j as v,ag as g,aF as f,ah as p,Y as h,aU as m,aC as y,I as S,aE as b,F as w,aV as z,aW as x}from"./index-a6ce377f.js";const[L,I]=a("image");const j=b(r({name:L,props:{src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:g,height:g,radius:g,lazyLoad:Boolean,iconSize:g,showError:f,errorIcon:p("photo-fail"),iconPrefix:String,showLoading:f,loadingIcon:p("photo"),crossorigin:String,referrerpolicy:String},emits:["load","error"],setup(a,{emit:r,slots:g}){const f=o(!1),p=o(!0),b=o(),{$Lazyload:w}=e().proxy,z=s((()=>{const r={width:l(a.width),height:l(a.height)};return i(a.radius)&&(r.overflow="hidden",r.borderRadius=l(a.radius)),r}));t((()=>a.src),(()=>{f.value=!1,p.value=!0}));const x=a=>{p.value&&(p.value=!1,r("load",a))},L=()=>{const a=new Event("load");Object.defineProperty(a,"target",{value:b.value,enumerable:!0}),x(a)},j=a=>{f.value=!0,p.value=!1,r("error",a)},E=(r,o,e)=>e?e():v(S,{name:r,size:a.iconSize,class:o,classPrefix:a.iconPrefix},null),P=()=>{if(f.value||!a.src)return;const r={alt:a.alt,class:I("img"),style:{objectFit:a.fit,objectPosition:a.position},crossorigin:a.crossorigin,referrerpolicy:a.referrerpolicy};return a.lazyLoad?h(v("img",y({ref:b},r),null),[[m("lazy"),a.src]]):v("img",y({ref:b,src:a.src,onLoad:x,onError:j},r),null)},$=({el:a})=>{const r=()=>{a===b.value&&p.value&&L()};b.value?r():u(r)},B=({el:a})=>{a!==b.value||f.value||j()};return w&&n&&(w.$on("loaded",$),w.$on("error",B),c((()=>{w.$off("loaded",$),w.$off("error",B)}))),d((()=>{u((()=>{var r;(null==(r=b.value)?void 0:r.complete)&&!a.lazyLoad&&L()}))})),()=>{var r;return v("div",{class:I({round:a.round,block:a.block}),style:z.value},[P(),p.value&&a.showLoading?v("div",{class:I("loading")},[E(a.loadingIcon,I("loading-icon"),g.loading)]):f.value&&a.showError?v("div",{class:I("error")},[E(a.errorIcon,I("error-icon"),g.error)]):void 0,null==(r=g.default)?void 0:r.call(g)])}}})),[E,P]=a("cell-group");const $=b(r({name:E,inheritAttrs:!1,props:{title:String,inset:Boolean,border:f},setup(a,{slots:r,attrs:o}){const e=()=>{var e;return v("div",y({class:[P({inset:a.inset}),{[x]:a.border&&!a.inset}]},o,z()),[null==(e=r.default)?void 0:e.call(r)])};return()=>a.title||r.title?v(w,null,[v("div",{class:P("title",{inset:a.inset})},[r.title?r.title():a.title]),e()]):e()}}));export{$ as C,j as I};
