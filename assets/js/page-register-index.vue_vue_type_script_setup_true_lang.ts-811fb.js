import{U as re,P as me,r as m,$ as ne,O as j,K as se,E as oe,az as ie,V as G,m as B,Z as p,n as a,M as u,Y as v,ae as M,ao as pe,ag as L,ah as X,au as _e,ap as le,aW as be,u as _,T as fe,F as Y,ar as he,as as we,o as C,aq as Se,aL as ye,aX as ke,t as Me,ak as z}from"./common.modules-66454b1c.js";import{d as Ne,V as Ve,P as Q,v as W,S as Ie,E as Oe,b as Ue,c as ve,e as qe}from"./page-login-index.vue_vue_type_script_setup_true_lang.ts-ca99c44b.js";import{v as xe,a3 as ue,a4 as Le,bR as ge,A as J,b6 as Ge,b7 as Re,aE as Te,G as de,cj as Ce,ba as Pe,ck as Fe,_ as De,bc as He,k as Ke,cl as je}from"./page-activity-ActivityDetail-3fa89c84.js";window.getBuildInfo=function(){return{buildTime:"6/28/2025, 1:52:17 PM",branch:" commitId:bffbb804753a4fe826427b457bb264c5556ef14e"}};const Je=w=>(he("data-v-e26f70e7"),w=w(),we(),w),Ze=["onKeydown"],ze={class:"tip"},We={key:0,class:"red"},Xe={key:1,class:"red"},Ye={class:"register__container-tip"},Qe=Je(()=>a("div",{class:"tipbg"},null,-1)),et={class:"register__container-tips"},tt={class:"register__container-invitation"},at={class:"register__container-invitation__label"},st={class:"register__container-invitation__input"},rt=["placeholder","disabled"],nt={class:"register__container-remember"},ot={class:"register__container-button"},it={class:"account"},lt={class:"loginin"},ut=re({__name:"Register",props:{registerData:{type:Object,required:!0}},emits:["submit"],setup(w,{expose:O,emit:H}){const I=w,{t:e}=me(),h=xe(),o=ue(),n=m(!1),t=m({number:"",numberType:o.rPwdForm.numberType,smsvcode:"",password:"",rePassword:"",invitecode:"",registerType:"mobile"}),P=m("register");t.value.number="",sessionStorage.getItem("register_a")&&(t.value=JSON.parse(sessionStorage.getItem("register_a")||""),sessionStorage.setItem("register_a",""));const R=ne(),S=m(!1),T=m(!1),U=j(()=>{var r,s,f;return!!((r=R.currentRoute.value.query)!=null&&r.invitationCode||(f=(s=R.currentRoute.value.query)==null?void 0:s.r_code)!=null&&f.toString()||sessionStorage.getItem("invitecode"))}),i=j(()=>I.registerData.isInvitecode=="1"?e("plsEnterInvitationCode"):e("notNecessary")),g=h.isOpenRegisterPhoneFirstZeroSwitch;se(()=>t.value.number,r=>{o.setCountDown(0)},{flush:"post"}),se(()=>o.rPwdForm.numberType,r=>{!t.value.numberType&&(t.value.numberType=r)},{flush:"post"});function y(){R.push({name:"login"})}const F=async()=>{if(!ge(t.value.numberType,t.value.number.trim().length))return o.setCountDown(0),_({message:e("wrongTel"),wordBreak:"break-word"});await J(Ge({phone:t.value.numberType.replace("+","")+t.value.number,codeType:Re.Registr}))?fe(e("sendSuccess")):setTimeout(()=>{o.setCountDown(0)},500)},A=j(()=>{var $;let r=e("regTip2").match(/\d+/);""+t.value.numberType;const s=($=h.getAreaPhoneLenList.find(c=>(c==null?void 0:c.area)=="+"+t.value.numberType))==null?void 0:$.len;let f=9;return(s==null?void 0:s.indexOf("-"))!=-1?f=s==null?void 0:s.toString().split("-")[0]:f=s,r?r[0].substr(0,f):""}),q=r=>{const s=r.target;s.value=s.value.replace(/[\s\n\t\r]/g,"")},k=async()=>{if(!ge(t.value.numberType,t.value.number.trim().length))return _({message:e("wrongTel"),wordBreak:"break-word"});if(t.value.number.charAt(0)==="0"&&h.isOpenRegisterPhoneFirstZeroSwitch)return _({message:e("registerNumberTip"),wordBreak:"break-word"});if(I.registerData.registerMobileState!=="1")return _({message:e("registerClose"),wordBreak:"break-word"});if(!t.value.number.trim()||S.value){S.value=!0;return}if(I.registerData.isOpenRegisterSMS!=="0")if(t.value.smsvcode.trim()){if(t.value.smsvcode.trim().length!=6)return _({message:e("verifyCode6Digits"),wordBreak:"break-word"})}else return _({message:e("registerTip1"),wordBreak:"break-word"});if(!t.value.password.trim())return _({message:e("registerTip2"),wordBreak:"break-word"});if(!W.passReg3.test(t.value.password)){n.value=!0;return}if(!t.value.rePassword.trim())return _({message:e("registerTip3"),wordBreak:"break-word"});if(t.value.rePassword!==t.value.password){T.value=!0;return}else T.value=!1;if(!o.userForm.termAndPolicy)return _({message:e("registerDesc1"),wordBreak:"break-word"});I.registerData.hasRegisterCaptcha==="1"?b():x("")},N=r=>{t.value.numberType=r},V=r=>{t.value.number=r},Z=()=>{ke("toPath","ResetPassword"),R.push({name:"About-AboutDetail"})},l=m(),d=m(""),{setLoading:D}=Le(),x=async r=>{Y(async()=>{D(!0),l.value.startRequestVerify();const{number:s,numberType:f,smsvcode:$,password:c,invitecode:ee}=t.value;let K={username:f.replace("+","")+s,smsvcode:$,registerType:t.value.registerType,pwd:c,invitecode:ee,domainurl:window.location.hostname,phonetype:Te(),captchaId:d.value,track:r,deviceId:localStorage.getItem("arvId")||""};o.register(K).then(async E=>{var ce;if(E){D(!1);const Ee=de(),{token:te,tokenHeader:$e,parentUserId:Be}=E==null?void 0:E.data;Ee.setToken(te),localStorage.setItem("tokenHeader",$e),localStorage.setItem("numberType",o.getUserForm.numberType),localStorage.setItem("number",o.userForm.number),H("submit"),R.replace("/"),await o.getUserInfo({signature:te});const ae=await o.getUserInfo({signature:te});Ce("prediction","userId",[Be]);const{onTriggerRegister:Ae}=Fe();Ae((ce=ae==null?void 0:ae.data)==null?void 0:ce.userId)}}).catch(E=>{}).finally(()=>{var E;D(!1),(E=l.value)==null||E.setShowHiden(!1)})})},b=async()=>{Y(async()=>{l.value.startRequestGenerate();const r=await J(Pe());r?(d.value=r.data.captchaId,l.value.endRequestGenerate(r.data.backgroundImage,r.data.sliderImage)):l.value.endRequestGenerate(null,null)})};return oe(()=>{var s,f;o.setCountDown(0);const r=((s=R.currentRoute.value.query.invitationCode)==null?void 0:s.toString())||((f=R.currentRoute.value.query.r_code)==null?void 0:f.toString())||sessionStorage.getItem("invitecode")||"";r&&(t.value.invitecode=r,sessionStorage.setItem("invitecode",r)),o.getIp()}),ie((r,s)=>{r.name=="About-AboutDetail"?sessionStorage.setItem("register_a",JSON.stringify(t.value)):sessionStorage.setItem("register_a","")}),O({showPhoneValidate:S}),(r,s)=>{const f=G("svg-icon"),$=G("van-checkbox");return C(),B("div",{class:"register__container",onKeydown:be(k,["enter"])},[p(Ne,{"show-validate":S.value,"onUpdate:showValidate":s[0]||(s[0]=c=>S.value=c),number:t.value.number,"onUpdate:number":s[1]||(s[1]=c=>t.value.number=c),"number-type":t.value.numberType,type:P.value,onChangeT:N,onChangeN:V,typeP:"register"},null,8,["show-validate","number","number-type","type"]),a("div",ze,[u(g)?(C(),B("span",We,v(u(e)("regTip1")),1)):M("v-if",!0),u(g)?(C(),B("p",Xe,v(A.value),1)):M("v-if",!0)]),r.registerData.isOpenRegisterSMS!=="0"?(C(),pe(Ve,{key:0,value:t.value.smsvcode,"onUpdate:value":s[2]||(s[2]=c=>t.value.smsvcode=c),sendFunc:F,number:t.value.number,numberType:t.value.numberType},null,8,["value","number","numberType"])):M("v-if",!0),p(Q,{value:t.value.password,"onUpdate:value":s[3]||(s[3]=c=>t.value.password=c),label:u(e)("setPsw")},null,8,["value","label"]),L(a("div",Ye,[Qe,a("span",null,v(u(e)("pswRule")),1)],512),[[X,n.value]]),p(Q,{value:t.value.rePassword,"onUpdate:value":s[4]||(s[4]=c=>t.value.rePassword=c),label:u(e)("comfirmPsw")},null,8,["value","label"]),L(a("div",et,[a("span",null,v(u(e)("unmatchedInput")),1)],512),[[X,T.value]]),a("div",tt,[a("div",at,[p(f,{name:"invitation"}),a("span",null,v(u(e)("invitationCode")),1)]),a("div",st,[L(a("input",{type:"text","auto-complete":"new-password",autocomplete:"off",name:"userNumber","onUpdate:modelValue":s[5]||(s[5]=c=>t.value.invitecode=c),placeholder:i.value,disabled:U.value,maxlength:"20",onInput:q},null,40,rt),[[_e,t.value.invitecode,void 0,{trim:!0}]])])]),a("div",nt,[p($,{modelValue:u(o).userForm.termAndPolicy,"onUpdate:modelValue":s[7]||(s[7]=c=>u(o).userForm.termAndPolicy=c)},{default:le(()=>[Se(v(u(e)("readNagree"))+" ",1),a("span",{onClick:s[6]||(s[6]=ye(c=>Z(),["stop"]))},v(u(e)("desPrivacy")),1)]),_:1},8,["modelValue"])]),a("div",ot,[a("button",{onClick:k},v(u(e)("register")),1),a("button",{class:"login",onClick:y},[a("div",it,v(u(e)("iHaveAcount")),1),a("div",lt,v(u(e)("goLogin")),1)])]),p(Ie,{ref_key:"captchaRef",ref:l,"refresh-color":"#FFFFFF","show-refresh":!0,onFinish:x,onRefresh:b},null,512)],40,Ze)}}});const dt=De(ut,[["__scopeId","data-v-e26f70e7"],["__file","/usr/local/jenkins-prod/workspace/ar011-pakistan-basantclub/src/components/Login/Register.vue"]]),ct=w=>(he("data-v-1679e191"),w=w(),we(),w),vt=["onKeydown"],gt={class:"register__container-tip"},mt=ct(()=>a("div",{class:"tipbg"},null,-1)),pt={class:"register__container-tips"},_t={class:"register__container-invitation"},bt={class:"register__container-invitation__label"},ft={class:"register__container-invitation__input"},ht=["placeholder","disabled"],wt={class:"register__container-remember"},St={class:"register__container-button"},yt={class:"account"},kt={class:"loginin"},It=re({__name:"EmailRegister",props:{registerData:{type:Object,required:!0}},emits:["submit"],setup(w,{expose:O,emit:H}){const I=w,{t:e}=me(),h=m(!1),o=ue(),n=m({smsvcode:"",password:"",rePassword:"",invitecode:"",email:"",registerType:"email"}),t=m("register");sessionStorage.getItem("register")&&(n.value=JSON.parse(sessionStorage.getItem("register")||""),sessionStorage.setItem("register",""));const P=ne(),R=m(!1),S=m(!1),T=j(()=>{var l;return!!((l=P.currentRoute.value.query)!=null&&l.invitationCode)}),U=j(()=>I.registerData.isInvitecode=="1"?e("plsEnterInvitationCode"):e("notNecessary"));se(()=>n.value.email,l=>{o.setCountDown(0)},{flush:"post"});function i(){P.push({name:"login"})}const g=async()=>{if(!W.email1.test(n.value.email))return o.setCountEmailDown(0),_({message:e(ve.email),wordBreak:"break-word"});await J(He({email:n.value.email,emailType:Re.Registr}))?fe(e("sendSuccess")):o.setCountEmailDown(0)},y=l=>{const d=l.target;d.value=d.value.replace(/[\s\n\t\r]/g,"")},F=async()=>{if(I.registerData.registerEmailState!=="1")return _({message:e("registerClose"),wordBreak:"break-word"});if(I.registerData.isOpenRegisterEmail!=="0")if(n.value.smsvcode.trim()){if(n.value.smsvcode.trim().length!=6)return _({message:e("verifyCode6Digits"),wordBreak:"break-word"})}else return _({message:e("registerTip6"),wordBreak:"break-word"});if(!W.email1.test(n.value.email))return _({message:e(ve.email),wordBreak:"break-word"});if(!n.value.password.trim())return _({message:e("registerTip2"),wordBreak:"break-word"});if(!W.passReg3.test(n.value.password)){h.value=!0;return}if(!n.value.rePassword.trim())return _({message:e("registerTip3"),wordBreak:"break-word"});if(n.value.rePassword!==n.value.password){S.value=!0;return}else S.value=!1;if(!o.userForm.termAndPolicy)return _({message:e("registerDesc1"),wordBreak:"break-word"});I.registerData.hasRegisterCaptcha==="1"?Z():V("")},A=l=>{n.value.email=l},q=()=>{ke("toPath","ResetPassword"),P.push({name:"About-AboutDetail"})},k=m(),N=m(""),V=async l=>{Y(async()=>{k.value.startRequestVerify();const{smsvcode:d,password:D,invitecode:x}=n.value;let b={username:n.value.email,smsvcode:d,registerType:n.value.registerType,pwd:D,invitecode:x,domainurl:window.location.hostname,phonetype:Te(),captchaId:N.value,track:l,deviceId:localStorage.getItem("arvId")||""};o.register(b).then(async r=>{var s;if(r){const f=de(),{token:$,tokenHeader:c,parentUserId:ee}=r==null?void 0:r.data;f.setToken($),localStorage.setItem("tokenHeader",c),localStorage.setItem("numberType",o.getUserForm.numberType),localStorage.setItem("number",o.userForm.number),H("submit"),P.replace("/");const K=await o.getUserInfo({signature:$});Ce("prediction","userId",[ee||""]);const{onTriggerRegister:E}=Fe();E((s=K==null?void 0:K.data)==null?void 0:s.userId)}}).catch(r=>{}).finally(()=>{k.value.setShowHiden(!1)})})},Z=async()=>{Y(async()=>{k.value.startRequestGenerate();const l=await J(Pe());l?(N.value=l.data.captchaId,k.value.endRequestGenerate(l.data.backgroundImage,l.data.sliderImage)):k.value.endRequestGenerate(null,null)})};return oe(()=>{var d,D;o.setCountEmailDown(0);const l=((d=P.currentRoute.value.query.invitationCode)==null?void 0:d.toString())||((D=P.currentRoute.value.query.r_code)==null?void 0:D.toString())||sessionStorage.getItem("invitecode")||"";l&&(n.value.invitecode=l)}),ie((l,d)=>{l.name=="About-AboutDetail"?sessionStorage.setItem("register",JSON.stringify(n.value)):sessionStorage.setItem("register","")}),O({showPhoneValidate:R}),(l,d)=>{const D=G("svg-icon"),x=G("van-checkbox");return C(),B("div",{class:"register__container",onKeydown:be(F,["enter"])},[p(Oe,{ref:"email",type:t.value,email:n.value.email,onChangeN:A},null,8,["type","email"]),l.registerData.isOpenRegisterEmail!=="0"?(C(),pe(Ue,{key:0,value:n.value.smsvcode,"onUpdate:value":d[0]||(d[0]=b=>n.value.smsvcode=b),sendFunc:g,email:n.value.email},null,8,["value","email"])):M("v-if",!0),p(Q,{value:n.value.password,"onUpdate:value":d[1]||(d[1]=b=>n.value.password=b),label:u(e)("setPsw")},null,8,["value","label"]),L(a("div",gt,[mt,a("span",null,v(u(e)("pswRule")),1)],512),[[X,h.value]]),p(Q,{value:n.value.rePassword,"onUpdate:value":d[2]||(d[2]=b=>n.value.rePassword=b),label:u(e)("comfirmPsw")},null,8,["value","label"]),L(a("div",pt,[a("span",null,v(u(e)("unmatchedInput")),1)],512),[[X,S.value]]),a("div",_t,[a("div",bt,[p(D,{name:"invitation"}),a("span",null,v(u(e)("invitationCode")),1)]),a("div",ft,[L(a("input",{type:"text","auto-complete":"new-password",autocomplete:"off",name:"userNumber","onUpdate:modelValue":d[3]||(d[3]=b=>n.value.invitecode=b),placeholder:U.value,disabled:T.value,maxlength:"20",onInput:y},null,40,ht),[[_e,n.value.invitecode,void 0,{trim:!0}]])])]),a("div",wt,[p(x,{modelValue:u(o).userForm.termAndPolicy,"onUpdate:modelValue":d[5]||(d[5]=b=>u(o).userForm.termAndPolicy=b)},{default:le(()=>[Se(v(u(e)("readNagree"))+" ",1),a("span",{onClick:d[4]||(d[4]=ye(b=>q(),["stop"]))},v(u(e)("desPrivacy")),1)]),_:1},8,["modelValue"])]),a("div",St,[a("button",{onClick:F},v(u(e)("register")),1),a("button",{class:"login",onClick:i},[a("div",yt,v(u(e)("iHaveAcount")),1),a("div",kt,v(u(e)("goLogin")),1)])]),p(Ie,{ref_key:"captchaRef",ref:k,"refresh-color":"#FFFFFF","show-refresh":!0,onFinish:V,onRefresh:Z},null,512)],40,vt)}}});const Rt=De(It,[["__scopeId","data-v-1679e191"],["__file","/usr/local/jenkins-prod/workspace/ar011-pakistan-basantclub/src/components/Login/EmailRegister.vue"]]),Tt={class:"resgister__C"},Ct={class:"resgister__C-heading"},Pt={class:"resgister__C-heading__title"},Ft={class:"resgister__C-heading__subTitle"},Dt={class:"login_container-tab"},Et={class:"resgister__C-form"},Mt=re({__name:"index",setup(w){const{openAll:O}=Ke(),H=de(),I=ue();m("");const e=m({isRegisterState:"1",SMSstate:"0",registerStateMsg:"",hasRegisterCaptcha:"0",registerEmailState:"0",registerMobileState:"0",isOpenRegisterSMS:"0",isOpenRegisterEmail:"0",isInvitecode:"0"}),h=m("phone"),o=ne();H.token&&o.push({name:"home"});const n=i=>{h.value=i};ie((i,g,y)=>{y(),i.name==="home"&&O()});const t=m();function P(){o.push({name:"home"})}async function R(){var g,y,F,A,q,k,N,V;const i=await J(je());i&&(e.value.isRegisterState=i.data.registerState,e.value.registerStateMsg=i.data.registerStateMsg,e.value.registerEmailState=i.data.registerEmailState,e.value.registerMobileState=(g=i.data)==null?void 0:g.registerMobileState,e.value.isOpenRegisterSMS=(y=i.data)==null?void 0:y.isOpenRegisterSMS,e.value.isOpenRegisterEmail=(F=i.data)==null?void 0:F.isOpenRegisterEmail,e.value.hasRegisterCaptcha=i.data.isOpenRegisterCaptcha,e.value.isInvitecode=(A=i.data)==null?void 0:A.isInvitecode,I.setTermAndPolicy(((q=i.data)==null?void 0:q.registerPrivacyChecked)==="1"),Number(i.data.registerEmailState)+Number((k=i.data)==null?void 0:k.registerMobileState)==0?(((N=i.data)==null?void 0:N.isOpenRegisterSMS)!=="1"&&(h.value="email"),o.push({name:"login"})):(e.value.registerSMSState=i.data.registerSMSState,e.value.registerEmailState!=="0"&&((V=i.data)==null?void 0:V.registerMobileState)=="0"&&(h.value="email")))}R();function S(){const g=window.location.hash.match(/invitationCode=([\d]+)/);return g?g[1]:null}const T=m(null),U=()=>{T.value&&window.gtag&&window.gtag("event","register_button_click",{invitation_code:T.value})};return S(),oe(async()=>{T.value=S(),T.value&&(window.gtag?window.gtag("event","page_view_with_invitation",{invitation_code:T.value}):console.warn("Google Analytics 未初始化，无法发送事件"));const{default:i}=await Me(()=>import("./chunk.fingerprintjs-e127d9ff.js"),["assets/js/chunk.fingerprintjs-e127d9ff.js","assets/js/common.modules-66454b1c.js","assets/css/common-e210f711.css"]);localStorage.getItem("arvId")||i.load().then(g=>{g.get().then(y=>{localStorage.setItem("arvId",y.visitorId)})}).catch(g=>{console.error("Error generating fingerprint:",g)})}),(i,g)=>{const y=G("NavBar"),F=G("svg-icon");return C(),B("div",Tt,[p(y,{onClickLeft:P,leftArrow:!0,headLogo:!0,class:"main"},{right:le(()=>[p(qe)]),_:1}),a("div",Ct,[a("h1",Pt,v(i.$t("register")),1),a("div",Ft,[a("span",null,v(i.$t("registerbyphoneoremail")),1)])]),a("div",Dt,[e.value.registerMobileState!="0"?(C(),B("div",{key:0,class:z(["tab",[h.value=="phone"?"active":""]]),onClick:g[0]||(g[0]=A=>n("phone"))},[p(F,{name:"phone"}),a("div",null,v(i.$t("phoneregister")),1)],2)):M("v-if",!0),e.value.registerEmailState!="0"?(C(),B("div",{key:1,class:z(["tab",[h.value=="email"?"active":""]]),onClick:g[1]||(g[1]=A=>n("email"))},[p(F,{name:"email"}),a("div",null,v(i.$t("emailregister")),1)],2)):M("v-if",!0)]),a("div",Et,[e.value.registerMobileState!="0"?(C(),B("div",{key:0,class:z(["tab-content",[h.value=="phone"?"activecontent":""]])},[p(dt,{ref_key:"register",ref:t,registerData:e.value,onSubmit:U},null,8,["registerData"])],2)):M("v-if",!0),e.value.registerEmailState!="0"?(C(),B("div",{key:1,class:z(["tab-content",[h.value=="email"?"activecontent":""]])},[p(Rt,{ref_key:"register",ref:t,registerData:e.value,onSubmit:U},null,8,["registerData"])],2)):M("v-if",!0)])])}}});export{Mt as _};
//# sourceMappingURL=page-register-index.vue_vue_type_script_setup_true_lang.ts-811fbdff.js.map
